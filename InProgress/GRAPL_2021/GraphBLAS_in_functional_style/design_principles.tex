\section{Design Principles}

Accurate type-level encoding of domain: monoids, semirings.

Monoids and semirings are closed under operations. 
Thus, in contrast with GraphBLAS API, $t \to t \to t$  
It make our definition less flexible, but allows one to generalize some operations, such as closure of relation.
We realize, that in some cases such restrictive constrains are not required.
Moreover, definition of matrix multiplication does not requires a semiring, it just requires a two operations $\oplus$ and $\otimes$ with following types: $\otimes: t_1 \to t_2 \to t_3$, $\oplus: t_3 \to t_3 \to t_3 $. 
But a set with such operations is not a semiring. 
It should be studied.

Matrices and vectors are equipped with monoid or semiring.
Explicit type conversions. 
Can be automatically removed in some cases during translation time.

Make coding easier and safe. 
Automate optimization.

Code generation in running time.
A way to solve problems with generics.
A way to apply advances optimization techniques~\cite{10.1145/3332466.3374507}

Code example with description and explanations.
Type is defined using descriminated unions: new set can contains both floats, marked with  \texttt{R} and a special value \texttt{Infinity}.
Thus floats is extended with infinity as required for accurate definition of \texttt{Min-Plus} semiring.
Semiring is defined.
Zero, operations, !!!!


\begin{listing}
\begin{minted}
[
frame=lines,
fontsize=\footnotesize,
framesep=2mm,
linenos,
autogobble,
numbersep=4pt
]
{fsharp}
type RInfinity = R of float | Infinity

[<Struct>]
type MinPlusSemiring = 
   MinPlusSemiring of RInfinity
with
   static member Zero = MinPlusSemiring Infinity
   static member (+) 
      (MinPlusSemiring x, MinPlusSemiring y) = 
          match x, y with
          | R x, R y -> System.Math.Min(x,y) |> R
          | _        -> Infinity 
          |> MinPlusSemiring
   static member (*) 
      (MinPlusSemiring x, MinPlusSemiring y) = 
          match x, y with
          | R x, R y -> x + y |> R
          | _        -> Infinity 
          |> MinPlusSemiring
   static member op_Implicit (MinPlusSemiring src) = 
      src
\end{minted}
\caption{Example om \texttt{Min-Plus} semiring definition}
\label{lst_example}
\end{listing}